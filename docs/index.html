<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>성공자 오디오</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="./manifest.json">
</head>
<body>
<h1>오오</h1>
<div>
    <input name="title" placeholder="제목"></input>
    <input name="desc" placeholder="내용"></input>
    <input name="file" placeholder="파일"></input>
    <buttion id="regist" onclick="regist()">등록하기</buttion>
</div>
<div>
    <input name="search" placeholder="검색어를 입력하세요"></input>
    <buttion id="search" onclick="search()">검색</buttion>
</div>
<div id="list"></div>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./service-worker.js');
    }
    const ADMIN_TOKEN = 'ba10cc7b9ba5b27317d546824a01203d89c0ea3e0972fab50cb786ab5a702dff';
    const now = new Date();

    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    const seconds = String(now.getSeconds()).padStart(2, '0');

    const yyyymmddhhmmss = `${year}${month}${day}${hours}${minutes}${seconds}`;

    function regist(){
        let data = {
            id : yyyymmddhhmmss,
            title : document.getElementsByName("title")[0].value,
            description : document.getElementsByName("desc")[0].value
        }

        fetch('https://todayaudio.writer1370.workers.dev/api/upload', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${ADMIN_TOKEN}`
          },
          body: JSON.stringify(data)
        });
    }
</script>
<script src="app.js"></script>
</body>
</html>
